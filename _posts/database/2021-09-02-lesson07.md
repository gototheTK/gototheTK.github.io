---
title: "데이터베이스 언어 SQL"
excerpt: "데이터베이스 언어 SQL"
layout: single
classes: wide
permalink: /database/lesson07
categories:
  - database
  - database language
tags:
  - database
  - database language
author_profile: false
sidebar:
  nav: database
---

## SQL의 역할을 이해하고, 이를 기능별로 분류해본다.

> SQL은 관계 데이터베이스를 위한 표준 데이터 언어 또는 표준 질의어이다. 여기서 질의어란 데이터 언어 중 검색 위주의 기능을 하는 비절차적 데이터 조작어를 의미한다. 그러나 SQL은 데이터 조작 기능과 정의 및 제어 기능까지 제공한다.

    데이터 정의어(DDL) : 테이블을 생성하고 변경 * 제거하는 기능을 제공한다.
    데이터 조작어(DML) : 테이블에 새 데이터를 삽입하거나, 테이블에 저장된 데이터를 수정, 삭제, 검색하는 기능을 제공한다.
    데이터 제어어(DCL) : 보안을 위해 데이터에 대한 접근 및 사용 권하을 사용자별로 부여하거나 취소하는 기능을 하는 언어다. 데이터베이스 관리자가 주로 사용한다.

## SQL의 데이터 정의 기능을 예제를 통해 익힌다.

    INT,INTEGER: 정수
    SAMLLINT: INT보다 작은 정수
    CHAR(n) or CHARACTER(n): 길이 n이 고정길이의 문자열
    VARCHAR(n) or CHARACTER VARYING(n): 최대 길이가 n인 가변 길이의 문자열
    NUMERIC(p, s) or DECIMAL : 고정 소수점 실수, p는 소수점을 제외한 전체 숫자의 길이고, s는 소수점 이하 숫자의 길이
    FLOAT(n) : 길이가 n인 부동 소수점 길이
    REAL : 부동 소수점 실수
    DATETIME or DATE : 년, 월 일로 표현되는 날짜
    TIME : 시, 분, 초로 표현되는 시간
    '' : 문자열을 표시하고 대소문자를 구분

    1. 테이블 생성(CREATE TABLE)

        CREATE TABLE 테이블_이름 (
            속성_이름 데이터_타입 [NOT NULL] [DEFAULT 기본_값]
            [PRIMARY KEY (속성_리스트)]
            [UNIQUE (속성_리스트)]
            [FOREIGN KEY (속성_리스트) REFERENCES 테이블_이름(속성_리스트)]
            [ON DELETE 옵션] [ON UPDATE 옵션]
            [CONSTRAINT 이름] [CHECK(조건)]
        )

        1. ON DELETE NO ACTION : 투플을 삭제하지 못하게함
        2. ON DELETE CASCADE : 관련 투플을 함께 삭제함
        3. ON DELETE SET NULL : 관련 투플의 외래키 값을 NULL로 변경함
        4. ON DELETE SET DEFAULT : 관련 투플의 값을 미리 지정한 기본 값으로 변경함

        예제1) 고객 테이블은 고객아이디, 고객이름, 나이, 직업, 적립금 속성으로 구성하고, 고객아이디 속성이 기본키다. 고객이름과 등급 속성은 값을 반드시 입력해야 하고, 적립금 속성은 값을 입력하지 않으면 0이 기본으로 입력되도록 고객 테이블을 생성해보자.
        CREATE TABLE 고객(
            고객아이디 VARCHAR2(20) NOT NULL,
            고객이름 VARCHAR2(20) NOT NULL,
            나이 INTEGER DEFAULT 0,
            등급 VARCHAR2(20) NOT NULL,
            직업 VARCHAR2(20),
            적립금 INTEGER,
            PRIMARY KEY (고객아이디)
        )

        예제2) 제품 테이블은 제품번호, 제품명, 재고량, 단가, 제고업체 속성으로 구성되고, 제품번호 속성이 기본키다. 재고량이 항상 0개 이상 10000개 이하를 유지하도록 제품 테이블을 생성해보자.

        CREATE TABLE 제품(
            제품번호 CHAR(3) NOT NULL,
            제품명 VARCHAR(20),
            재고량 INTEGER,
            단가 INTEGER,
            제조업체 VARCHAR(20),
            PRIMARY KEY(제품번호),
            CHECK (재고량 >= 0 AND 재고량 <= 10000)
        );

        예제3) 주문 테이블은 주문번호, 주문고객, 주문제품, 수량, 배송지, 주문일자 속성으로 구성되고, 주문번호 속성이 기본키다. 주문고객 속성이 고객 테이블의 고객아이디 속성을 참조하는 외래키이고, 주문제품 속성이 제품 테이블의 제품번호 속성을 참조하는 외래키가 되도록 주문 테이블을 생성해보자.

        CREATE TABLE 주문 (
            주문번호 VARCHAR(20) NOT NULL,
            주문고객 VARCHAR(20),
            주문제품 VARCHAR(20),
            수량 INTEGER,
            배송지 VARCHAR(20),
            주문일자 DATE
            PRIMARY KEY(주문번호),
            FOREGIN KEY(주문고객) REFERENCE 고객(고객아이디),
            FOREGIN KEY(주문제품) REFERENCE 제품(제품번호)
        );

    2. 테이블 변경(ALTER TABLE)

        2.1. 새로운 속성의 추가

        ALTER TABLE 테이블_이름
            ADD 속성_이름 데이터_타입 [NOT NULL] [DEFAULT 기본_값];

            예제7) 예제1)에서 생성한 고객 테이블에 가입날짜 속성을 추가해보자.

                ALTER TABLE 고객 ADD 가입날짜 DATETIME;

        2.2 기존 속성의 삭제

        ALTER TABLE 테이블_이름
            DROP 속성_이름 CASCADE | RESTRICT;

            예제8) 예제1)에서 생성한 고객 테이블의 등급 속성을 삭제하면서 관련된 제약조건이나 등급 속성을 참조하는 다른 속성도 함께 삭제해보자.

                ALTER TABLE 고객 DROP 등급 CASCADE;

        2.3 새로운 제약조건의 추가

            ALTER TABLE 테이블_이름 ADD CONSTRAINT 제약조건_이름 제약조건_내용;

            예제9) 고객 테이블에 20세 이상의 고객만 가입할 수 있다는 데이터 무결성 제약조건을 추가해보자.

                ALTER TABLE 고객 ADD CONSTRAINT CHK_AGE (나이>=20);

        2.4 기존 제약조건의 삭제

            ALTER TABLE 테이블_이름 DROP CONSTRAINT 제약조건_이름;

            예제9) 고객 테이블에 20세 이상의 고객만 가입할 수 있다는 데이터 무결성 제약조건을 삭제해보자.

                ALTER TABLE 고객 DROP CONSTRAINT CHK_AGE;

    3. 테이블 제거(DROP TABLE)

        DROP TABLE 테이블 CASCADE | RESTRICT;

        예제10) 고객 테이블을 삭제하되, 고객 테이블을 참조하는 다른 테이블이 존재하면 삭제가 수행되지 않도록 해보자.

            DROP TABLE 고객 RESTRICT;

## SQL의 데이터 조작 기능을 예제를 통해 익힌다.

    SQL의 데이터 조작 기능은 원하는 데이터 검색, 새로운 데이터 삽입, 데이터 수정, 데이터 삭제로 분류할 수 있다.

    SELECT [ALL |DISTINCT] 속성 리스트
    FROM 테이블_리스트
    [ WHERE 조건 ];

    예제 7-9)
        고객 테이블에서 고객아이디, 고객이름, 등급 속성을 검색해보자.
            SELECT 고객아이디, 고객이름, 등급, FROM 고객;

    예제 7-10)
        고객 테이블에 존재하는 모든 속성을 검색해보자.
            SELECT 고객아이디, 고객이름, 나이, 등급, 직업, 적립금
            FROM 고객;

## 뷰의 개념과 장점을 이해한다.

## 삽입 SQL의 역할을 이해한다.
